<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>BlogQuestion</title>
  <script src="/static/js/auth.js" defer></script>
  <script src="/static/js/protected.js" defer></script>
  <script src="/static/js/index.js" defer></script>
  <link rel="stylesheet" href="/static/css/styles.css" />
</head>
<body>

<!--хедер-->
  <div id="header"></div>
<!--хедер-->

<!--<button type="submit" href="">Создать новый пост</button>-->


  <main>
    <button onclick="window.location.href='/static/templates/posts/create.html'">Создать новый пост</button>
    <h3>User:</h3>
    <p id="username">Загрузка...</p>
    <p id="user-email">Загрузка...</p>
    <p id="is-superuser"></p>


    <h2>Мои посты</h2>
    <div id="posts-list"></div>
  </main>


<!--  концовка  -->
  <div id="footer"></div>

  <script type="module">
  async function include(elId, url) {
    try {
      const el = document.getElementById(elId);
      if (!el) return;
      const r = await fetch(url, { cache: "no-cache" });
      if (!r.ok) throw new Error(`${r.status} ${r.statusText}`);
      el.innerHTML = await r.text();
    } catch (e) {
      console.error("Include error:", url, e);
    }
  }

  Promise.all([
    include('header', '/static/templates/includes/header.html'),
    include('footer', '/static/templates/includes/footer.html')
  ]);
</script>
</body>
</html>